<h1><%= @the_tag.name %></h1>

<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
  <p><a href="/categories">‚Üê Back to My Wishlist</a></p>

  <form action="/categories/<%= @the_tag.id %>" method="get" style="display: flex; align-items: center; gap: 10px;">
    <label for="sort_by" style="font-size: 14px;">Sort by:</label>
    <select id="sort_by" name="sort_by" onchange="this.form.submit()" style="font-size: 14px; padding: 5px 10px;">
      <option value="">-- Select --</option>
      <option value="price">Price</option>
      <option value="priority">Priority(High to Low)</option>
      <option value="buy_by">Buy By Date</option>
    </select>
  </form>
</div>

<% if @list_of_items.count == 0 %>
  <p>No items in this category yet.</p>
<% end %>

<ul>
  <% @list_of_items.each do |an_item| %>
    <li style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
      <div style="display: flex; align-items: center; gap: 15px;">
        <% if an_item.image_url.present? %>
          <img src="<%= an_item.image_url %>" style="width: 60px; height: 60px; object-fit: cover;">
        <% end %>
        
        <a href="/items/<%= an_item.id %>">
          <%= an_item.title.present? ? an_item.title : "Untitled" %>
        </a>
      </div>

      <div style="display: flex; gap: 30px; align-items: center;">
        <% if an_item.brand.present? %>
          <span>Brand: <%= an_item.brand %></span>
        <% end %>

        <% if an_item.buy_by.present? %>
          <span>Buy by: <%= an_item.buy_by.strftime("%B %d, %Y") %></span>
        <% end %>
      </div>
    </li>
  <% end %>
</ul>
